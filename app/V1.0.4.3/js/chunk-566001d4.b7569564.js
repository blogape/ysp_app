(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-566001d4"],{"0179":function(e,t,i){"use strict";var a=i("9f0d"),n=i.n(a);n.a},"1c86":function(e,t,i){"use strict";function a(){EG_Recipes.userData(JSON.stringify({funName:"getUserDataFromNative"}))}i.d(t,"a",function(){return a})},"62da":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"product"},[e.isheader?i("Header",{attrs:{isshare:!0,isHideSearch:e.isSearch,title:e.recipedata.title,imageUrl:e.recipedata.coverimg,descriContent:e.recipedata.description,shareUrl:e.sharUrl+e.recipeId+"?sharid=1"}},[e._v(e._s(this.title))]):e._e(),i("div",{staticClass:"banner"},[i("img",{attrs:{src:e.recipedata.coverimg}})]),i("div",{staticClass:"author"},[i("div",{staticClass:"head-portrait"},[i("img",{attrs:{src:e.userdata.headimg}})]),i("span",{staticClass:"name"},[e._v(e._s(e.userdata.nickname))]),e.iscoolebtn?i("div",{class:{collection:e.isActive,collec:e.hasError},attrs:{collection:""},on:{click:e.handleCollection}},[i("font",[e._v(e._s(e.collecttext)+" ")])],1):e._e()]),i("div",{staticClass:"describle"},[i("div",{staticClass:"title"},[e._v("\n                    "+e._s(e.recipedata.title)+"\n                ")]),i("div",{staticClass:"difficulty"},[e._v("\n                    难度："+e._s(e.difficultyView)),i("font",[e._v("制作时间：约"+e._s(e.diifftimeCost))])],1),i("div",{staticClass:"content"},[e._v("\n                  "+e._s(e.recipedata.description)+"\n                ")])]),i("div",{staticClass:"material"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.ingredients.length>1,expression:"ingredients.length>1"}],staticClass:"main"},[i("div",{staticClass:"title"},[e._v("\n                    主料\n                    ")]),i("div",{staticClass:"content"},[i("ul",e._l(e.ingredients,function(t,a){return i("li",{key:a},[e._v(e._s(t.ingredientName)+" "),i("font",[e._v(e._s(t.numberUnit))])],1)}))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.material.length>1,expression:"material.length>1"}],staticClass:"ingredients"},[i("div",{staticClass:"title"},[e._v("\n                    配料\n                    ")]),i("div",{staticClass:"content"},[i("ul",e._l(e.material,function(t,a){return i("li",{key:a},[e._v(e._s(t.ingredientName)+" "),i("font",[e._v(e._s(t.numberUnit))])],1)}))])])]),i("div",{staticClass:"cookiestep"},e._l(e.recipedata.cookingSteps,function(t,a){return i("div",{key:a,staticClass:"content"},[i("div",{staticClass:"title"},[e._v("\n                    "+e._s(t.title)+"          \n                     ")]),i("ul",e._l(t.cookingStepByTitle,function(t,a){return i("li",{key:a},[i("div",{staticClass:"name"},[e._v("\n                                步骤"+e._s(t.stepno)+"\n                            ")]),i("div",{staticClass:"img"},[i("img",{attrs:{src:t.images}})]),i("p",[e._v("                            "+e._s(t.description)+"\n")])])}))])})),i("div",{staticClass:"tips"},[i("div",{staticClass:"title"},[e._v("\n                小贴士\n                ")]),e._v("\n                "+e._s(e.recipedata.tips)+"\n            ")]),i("div",{staticClass:"equipment"},[i("div",{staticClass:"title"},[e._v("\n                        支持设备\n                    ")]),i("ul",e._l(e.recipedata.recipeMacModelMids,function(t,a){return i("li",{key:a},[e._v(e._s(t.macName)+" "+e._s(t.macModel))])}))]),i("div",{staticClass:"datareading"},[e._v("\n                  阅读 "+e._s(e.recipedata.readCount)+"      "),i("font",[e._v(e._s(e.recipedata.createTime))])],1),e.iscookiebtn?i("div",{staticClass:"cookie_btn",on:{click:e.handleCookieBtn}},[e._v("\n                一键烹饪\n        ")]):e._e(),i("van-popup",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("div",{staticClass:"equipment-popup"},[i("div",{staticClass:"header"},[e._v("\n        请选择烹饪设备\n      ")]),i("div",{staticClass:"content"},[i("ul",e._l(e.equipmentdata,function(t,a){return i("li",{key:a},[i("a",{on:{click:function(i){e.handleCookieClick(t.did,t.uuid,t.status,t.recipeId,t.type,e.recipedata.title)}}},[i("img",{attrs:{src:t.image}}),i("div",{staticClass:"container"},[i("span",[e._v(e._s(t.name)+" ")]),i("span",{staticClass:"status"},[e._v(e._s(t.status))])])])])}))]),i("div",{staticClass:"footer",on:{click:e.handleCancel}},[e._v("\n          取消\n      ")])])])],1)},n=[],s=(i("96cf"),i("cb0c")),r=(i("cadf"),i("551c"),i("097d"),i("981c")),c=i("7424"),o=i("1c86"),d=i("b970"),l=i("b775"),u={data:function(){return{title:"",recipedata:"",isheader:!0,isSearch:!1,iscookiebtn:!0,show:!1,isActive:!0,collecttext:"收藏",hasError:!1,sharUrl:"",iscoolebtn:!0,userdata:"",ingredients:"",token:"",text:"1",material:"",difficulty:"",timeCost:"",recipeId:"",iscollect:"",equipmentdata:"",code:""}},components:{Header:r["a"]},created:function(){this.getRecipeData()},methods:{handleShareHide:function(){var e=window.location.href,t=e.indexOf("sharid");-1!=t&&(this.iscoolebtn=!1,this.iscookiebtn=!1,this.isheader=!1)},startCookie:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,i,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["y"])(i,t,a,this.token,this.text);case 2:return e.abrupt("return",this.code=e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,i,a){return e.apply(this,arguments)}}(),getRecipeData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=JSON.parse(localStorage.getItem("userData")),null==i||(t=i.token),e.next=4,Object(c["v"])(this.$route.params.id,t);case 4:a=e.sent,this.recipedata=a.data,this.timeCost=this.recipedata.timeCost,this.recipeId=a.data.id,this.iscollect=this.recipedata.iscollect,this.title=this.recipedata.title.length>6?this.recipedata.title.substring(0,16)+"...":this.recipedata.title,this.userdata=a.data.user,this.difficulty=a.data.difficultyDegree,a.data.ingredientInfo[0].ingredients&&(this.ingredients=a.data.ingredientInfo[0].ingredients),a.data.ingredientInfo[1].ingredients&&(this.material=a.data.ingredientInfo[1].ingredients),0==this.iscollect?(this.isActive=!0,this.hasError=!1):1==this.iscollect&&(this.isActive=!1,this.hasError=!0,this.collecttext="已收藏");case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCollection:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:Object(o["a"])(),setTimeout(Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("userData")),null==t){e.next=25;break}if("收藏"!=i.collecttext){e.next=20;break}return e.next=5,Object(c["w"])(i.recipeId,t.token);case 5:if(a=e.sent,0!=a.code){e.next=13;break}Object(d["b"])("收藏成功~"),i.collecttext="已收藏",i.isActive=!1,i.hasError=!0,e.next=18;break;case 13:if(1!=a.code){e.next=18;break}return e.next=16,Object(c["f"])(i.recipeId,t.token);case 16:n=e.sent,0==n.code&&(Object(d["b"])("您已取消收藏~"),i.collecttext="收藏",i.isActive=!0,i.hasError=!1);case 18:e.next=25;break;case 20:if(!(i.collecttext="已收藏")){e.next=25;break}return e.next=23,Object(c["f"])(i.recipeId,t.token);case 23:s=e.sent,0==s.code&&(Object(d["b"])("您已取消收藏~"),i.collecttext="收藏",i.isActive=!0,i.hasError=!1);case 25:case"end":return e.stop()}},e,this)})),200);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleCancel:function(){this.show=!1},handleCookieBtn:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:Object(o["a"])(),setTimeout(Object(s["a"])(regeneratorRuntime.mark(function e(){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=JSON.parse(localStorage.getItem("userData")),null==i){e.next=8;break}return t.token=i.token,e.next=5,Object(c["x"])(t.recipeId,i.token);case 5:a=e.sent,t.equipmentdata=a.data,t.equipmentdata.length>0?t.show=!0:(Object(d["b"])("您没有可支持此食谱的设备！"),t.show=!1);case 8:case"end":return e.stop()}},e,this)})),300);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCookieClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,i,a,n,s,r){var c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.handleCookieBtn(),"离线"!=a){e.next=5;break}Object(d["b"])("离线设备无法使用~"),e.next=13;break;case 5:if(this.recipeId!=n){e.next=12;break}if("待机"!=a){e.next=9;break}return"智能牛排机"==s?(this.startCookie(t,i,this.recipeId),setTimeout(function(){0==c.code.code||9500==c.code.code?c.$router.push({name:"SteakCookie",query:{macId:c.macId,iotMacModelId:c.iotMacModelId,recipeid:c.recipeId,title:r}}):Object(d["b"])("控制异常，请确认网络和设备工作是否正常！")},100)):(this.startCookie(t,i,this.recipeId),setTimeout(function(){0==c.code.code||9500==c.code.code?c.$router.push({name:"BreadCookie",query:{macId:t,iotMacModelId:i,recipeid:c.recipeId,title:r}}):Object(d["b"])("控制异常，请确认网络和设备工作是否正常！")})),e.abrupt("return",!1);case 9:"预热"!=a&&"预热完成"!=a&&"工作中"!=a&&"暂停中"!=a||("智能牛排机"==s?this.$router.push({name:"SteakCookie",query:{macId:t,iotMacModelId:i,recipeid:this.recipeId,title:r}}):this.$router.push({name:"BreadCookie",query:{macId:t,iotMacModelId:i,recipeid:this.recipeId,title:r}})),e.next=13;break;case 12:null==n&&"待机"!=a?Object(d["b"])("设备正在运行中~"):this.recipeId!=n&&("待机"==a?"智能牛排机"==s?(this.startCookie(t,i,this.recipeId),setTimeout(function(){0==c.code.code||9500==c.code.code?c.$router.push({name:"SteakCookie",query:{macId:t,iotMacModelId:i,recipeid:c.recipeId,title:r}}):Object(d["b"])("控制异常，请确认网络和设备工作是否正常！")},500)):(this.startCookie(t,i,this.recipeId),setTimeout(function(){0!=c.code.code&&9500!=c.code.code||c.$router.push({name:"BreadCookie",query:{macId:t,iotMacModelId:i,recipeid:c.recipeId,title:r}})},500)):Object(d["b"])("当前设备正在工作中或者正在烹饪别的食谱！"));case 13:case"end":return e.stop()}},e,this)}));return function(t,i,a,n,s,r){return e.apply(this,arguments)}}()},mounted:function(){var e;this.sharUrl=Object(l["c"])(),this.handleShareHide();var t=JSON.parse(localStorage.getItem("userData"));e=null==t?null:t.token,this.token=e},computed:{diifftimeCost:function(){return this.timeCost<60?this.timeCost+"分钟":this.timeCost>=60?Math.floor(this.timeCost/60)+"小时":void 0},difficultyView:function(){switch(this.difficulty){case 0:return"初级";case 1:return"中级";case 2:return"高级";default:}}}},h=u,p=(i("0179"),i("2877")),f=Object(p["a"])(h,a,n,!1,null,"37eb2508",null);f.options.__file="index.vue";t["default"]=f.exports},"981c":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"main"},[i("span",{staticClass:"icon iconfont icon-fanhui",on:{click:e.handleBack}}),e._t("default"),e.isHideSearch?i("i",{staticClass:"icon iconfont icon-sousuo",on:{click:e.handleShow}}):e._e(),e.isshare?i("i",{staticClass:"icon iconfont icon-fenxiang",on:{click:e.handleSshare}}):e._e()],2),i("Search",{ref:"isSearch",staticClass:"searchbox"})],1)},n=[],s=(i("cadf"),i("551c"),i("097d"),i("9d59")),r={props:["isHideSearch","title","imageUrl","descriContent","shareUrl","isshare"],data:function(){return{}},components:{Search:s["a"]},created:function(){},mounted:function(){},methods:{handleBack:function(){if("undefined"!=typeof EG_Recipes){var e=localStorage.getItem("rootType");console.log(e),1==e||null==e?this.$router.back(-1):EG_Recipes.callBack(JSON.stringify({callBackNative:1}))}else this.$router.back(-1)},handleShow:function(){this.$refs.isSearch.show=!0},handleSshare:function(){var e=JSON.stringify({title:this.title,descriContent:this.descriContent,shareUrl:this.shareUrl,imageUrl:this.imageUrl});"undefined"!=typeof EG_Recipes&&EG_Recipes.toShareByNative(e)}}},c=r,o=(i("f506"),i("2877")),d=Object(o["a"])(c,a,n,!1,null,"9ee3b3ea",null);d.options.__file="index.vue";t["a"]=d.exports},"9f0d":function(e,t,i){},f506:function(e,t,i){"use strict";var a=i("f61c"),n=i.n(a);n.a},f61c:function(e,t,i){}}]);